ID=id=>document.getElementById(id),nospace=name=>name.includes(" ")?name.replaceAll(" ",""):name;const container=ID("container"),country=ID("country"),countriesSuggested=ID("countriesSuggested"),countries=JSON.parse(localStorage.getItem("countries"));function separateNumberByComma(val){for(;/(\d+)(\d{3})/.test(val.toString());)val=val.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,");return val}function feed(country){let countryToDisplay=`\n        <div id="${nospace(country.name.common)}" class="country shadow" onclick="getDetails(${nospace(country.name.common)})">\n            <div class="flag">\n                <img src="${country.flags.svg}" class="shadow" alt="" loading="lazy">\n            </div>\n            <p>${country.name.common}</p>\n            <p>Population: <span>${separateNumberByComma(Number(country.population))}</span></p>\n            <p>Region: <span>${country.region}</span></p>\n            <p>Capital: <span>${country.capital}</span></p>\n        </div>`;container.insertAdjacentHTML("beforeend",countryToDisplay)}function feedDetails(country){findNameFromTag=tag=>{countries.forEach(country=>{tag===country.cca3&&(borders+=`<button class="shadow" onclick="displayDetails('${nospace(country.name.common)}')">${country.name.common}</button>`)})};let languages=[];country.languages?country.languages&&Object.keys(country.languages).forEach(lang=>{languages.push(" "+country.languages[lang])}):languages=["not specified"];let borders="";country.borders?Object.keys(country.borders).forEach(border=>{findNameFromTag(country.borders[border])}):borders="no border country";let currencies=[];country.currencies?Object.keys(country.currencies).forEach(currency=>{currencies.push(country.currencies[currency].name)}):currencies=["not specified"];let nativeName=[];country.name.nativeName?Object.keys(country.name.nativeName).forEach(native=>{nativeName.push(" "+country.name.nativeName[native].common)}):nativeName=["not specified"];let countryToDisplay=`\n      <div id="${country.name.common}">\n          <img src="${country.flags.svg}" class="shadow" alt="">\n          <div>\n            <p id="countryName">${country.name.common}</p>\n            <div id="infos">\n              <div id="info1">\n                <p>Native Name: <span>${nativeName}</span></p>\n                <p>Population: <span>${separateNumberByComma(Number(country.population))}</span></p>\n                <p>Region: <span>${country.region}</span></p>\n                <p>Sub Region: <span>${country.subregion||"not specified"}</span></p>\n                <p>Capital: <span>${country.capital||"not specified"}</span></p>\n              </div>\n              <div id="info2">\n                <p>Top Level Domain: <span>${country.tld[0]||"none"}</span></p>\n                <p>Currencies: <span>${currencies}</span></p>\n                <p>Languages: <span>${languages}</span></p>\n              </div>\n            </div>\n            <div id="borders"><p>Border Countries:</p>`+borders+"</div>\n          </div>\n      </div>";ID("insertDetails").insertAdjacentHTML("beforeend",countryToDisplay)}function getDetails(data){document.location.href="/#details",inputCountry.value="",displayDetails(data.id)}function getHome(){displayCountries("all"),document.location.href="/#home"}resetDom=dom=>{for(;dom.firstChild;)dom.removeChild(dom.firstChild)},displayCountries=filter=>{resetDom(countriesSuggested),resetDom(container),resetDom(ID("insertDetails")),countries.forEach(country=>{"all"===filter&&feed(country),country.region==filter&&feed(country),country.name.common==filter&&feed(country)})},displayDetails=filter=>{resetDom(ID("insertDetails")),countries.forEach(country=>{nospace(country.name.common)==filter&&feedDetails(country)})},displayCountries("all"),toggleRegions=()=>{1==ID("filterButton").checked?ID("regions").classList.remove("none"):ID("regions").classList.add("none")},window.onclick=e=>{"labelButton"!==e.target.id&&"filterButton"!==e.target.id&&(ID("regions").classList.add("none"),ID("filterButton").checked=!1)},inputCountry.oninput=()=>{0===inputCountry.value.length&&displayCountries("all"),resetDom(countriesSuggested),inputCountry.value.length>1&&countries.forEach(country=>{(country.name.common.toLowerCase().includes(inputCountry.value)||country.name.official.toLowerCase().includes(inputCountry.value))&&countriesSuggested.insertAdjacentHTML("beforeend",`<p onclick="displayCountries('${country.name.common}')">\n                  ${country.flag} ${country.name.common} / ${country.name.official}</p>`)})},ID("darkmode").onchange=e=>{1==e.target.checked?document.querySelector("body").classList.replace("lightmode","darkmode"):document.querySelector("body").classList.replace("darkmode","lightmode")};